# RobloxFriendBot вЂ” СЌС‚Р°Рї 1 (Onboarding)

Р‘РѕС‚ РЅР° aiogram 3.x СЃ PostgreSQL, Redis Рё С‡РµСЂРЅРѕРІРѕР№ i18n (RU/EN). Р РµР°Р»РёР·РѕРІР°РЅ С„СѓРЅРґР°РјРµРЅС‚ Рё СЃС†РµРЅР°СЂРёР№ СЂРµРіРёСЃС‚СЂР°С†РёРё.

## Р§С‚Рѕ СѓР¶Рµ СЂР°Р±РѕС‚Р°РµС‚
- `/start` Р·Р°РїСѓСЃРєР°РµС‚ РІРёР·Р°СЂРґ СЂРµРіРёСЃС‚СЂР°С†РёРё (РЅРёРє Roblox в†’ РІРѕР·СЂР°СЃС‚ в†’ СЏР·С‹Рє в†’ РІС‹Р±РѕСЂ РґРѕ 5 СЂРµР¶РёРјРѕРІ в†’ Р±РёРѕ в†’ Р°РІР°С‚Р°СЂ РёР»Рё РїСЂРѕРїСѓСЃРє).
- Р’Р°Р»РёРґР°С†РёРё: РЅРёРє (3вЂ“30 Р»Р°С‚РёРЅСЃРєРёС… СЃРёРјРІРѕР»РѕРІ/С†РёС„СЂ/`_`/`-`), РІРѕР·СЂР°СЃС‚ (8вЂ“99), Р»РёРјРёС‚ СЂРµР¶РёРјРѕРІ.
- Р”Р°РЅРЅС‹Рµ СЃРѕС…СЂР°РЅСЏСЋС‚СЃСЏ РІ Postgres (РјРѕРґРµР»СЊ User + СЃРІСЏР·Рё СЃ Game), FSM С…СЂР°РЅРёС‚СЃСЏ РІ Redis.
- РђРІС‚РѕСЃРёРґРёРЅРі РёРіСЂ РёР· `data/games.json`.
- `/profile` РїРѕРєР°Р·С‹РІР°РµС‚ РєР°СЂС‚РѕС‡РєСѓ (С‚РµРєСЃС‚/С„РѕС‚Рѕ) СЃ inline-РєРЅРѕРїРєР°РјРё В«Р РµРґР°РєС‚РёСЂРѕРІР°С‚СЊВ» (Р·Р°РіР»СѓС€РєР°) Рё В«РЈРґР°Р»РёС‚СЊ РїСЂРѕС„РёР»СЊВ».
- `/help` РІС‹РґР°С‘С‚ РєСЂР°С‚РєСѓСЋ РїР°РјСЏС‚РєСѓ РїРѕ РєРѕРјР°РЅРґР°Рј. `/cancel` СЃР±СЂР°СЃС‹РІР°РµС‚ С‚РµРєСѓС‰РёР№ СЃС†РµРЅР°СЂРёР№.

## Р‘С‹СЃС‚СЂС‹Р№ СЃС‚Р°СЂС‚
1. РЈСЃС‚Р°РЅРѕРІРёС‚Рµ Р·Р°РІРёСЃРёРјРѕСЃС‚Рё:
   ```bash
   python -m venv .venv
   .venv\Scripts\activate  # Windows
   pip install -r requirements.txt
   ```
2. РЎРєРѕРїРёСЂСѓР№С‚Рµ `.env.example` РІ `.env` Рё Р·Р°РїРѕР»РЅРёС‚Рµ:
   ```env
   BOT_TOKEN=your_telegram_bot_token
   DATABASE_URL=postgresql+asyncpg://user:pass@localhost:5432/roblox_friend_bot
   REDIS_URL=redis://localhost:6379/0
   DEFAULT_LANGUAGE=ru
   ```
3. РЈР±РµРґРёС‚РµСЃСЊ, С‡С‚Рѕ PostgreSQL Рё Redis Р·Р°РїСѓС‰РµРЅС‹ Рё РґРѕСЃС‚СѓРїРЅС‹ РїРѕ СѓРєР°Р·Р°РЅРЅС‹Рј URL.
4. РЎС‚Р°СЂС‚СѓР№С‚Рµ Р±РѕС‚Р°:
   ```bash
   python -m bot.main
   ```
   РџСЂРё РїРµСЂРІРѕРј Р·Р°РїСѓСЃРєРµ СЃРѕР·РґР°РґСѓС‚СЃСЏ С‚Р°Р±Р»РёС†С‹ Рё Р·Р°РіСЂСѓР·РёС‚СЃСЏ СЃРїРёСЃРѕРє РёРіСЂ.

## РЎС‚СЂСѓРєС‚СѓСЂР°
- `bot/main.py` вЂ” С‚РѕС‡РєР° РІС…РѕРґР°, РёРЅРёС†РёР°Р»РёР·Р°С†РёСЏ Р‘Р”, Redis FSM, СЂРѕСѓС‚РµСЂРѕРІ.
- `bot/db` вЂ” РјРѕРґРµР»Рё SQLAlchemy (`User`, `Game`, `user_games`), С„Р°Р±СЂРёРєР° СЃРµСЃСЃРёР№ Рё create_all.
- `bot/handlers/register.py` вЂ” FSM СЂРµРіРёСЃС‚СЂР°С†РёРё (СЌС‚Р°Рї 1).
- `bot/handlers/profile.py` вЂ” РІС‹РІРѕРґ РїСЂРѕС„РёР»СЏ, СѓРґР°Р»РµРЅРёРµ, Р·Р°РіР»СѓС€РєР° СЂРµРґР°РєС‚РёСЂРѕРІР°РЅРёСЏ.
- `bot/handlers/common.py` вЂ” `/help` Рё РѕР±С‰РёРµ РјРµР»РѕС‡Рё.
- `bot/services` вЂ” СЂР°Р±РѕС‚Р° СЃ Р‘Р” (users/games), РѕС‚РїСЂР°РІРєР° РєР°СЂС‚РѕС‡РєРё РїСЂРѕС„РёР»СЏ.
- `bot/utils` вЂ” Р»РѕРіРёСЂРѕРІР°РЅРёРµ, i18n-СЃР»РѕРІР°СЂСЊ (RU/EN), РѕРїСЂРµРґРµР»РµРЅРёРµ locale, С„РѕСЂРјР°С‚РёСЂРѕРІР°РЅРёРµ РєР°СЂС‚РѕС‡РµРє.
- `data/games.json` вЂ” РґРµС„РѕР»С‚РЅС‹Рµ СЂРµР¶РёРјС‹ РґР»СЏ РІС‹Р±РѕСЂР°.

## Р—Р°РјРµС‡Р°РЅРёСЏ
- Р›РѕРєР°Р»РёР·Р°С†РёСЏ СЃРµР№С‡Р°СЃ СЃР»РѕРІР°СЂРЅР°СЏ (РІ РєРѕРґРµ) + РїРѕРґРіРѕС‚РѕРІР»РµРЅС‹ РєР°С‚Р°Р»РѕРіРё `bot/locales` РґР»СЏ Р±СѓРґСѓС‰РµРіРѕ gettext.
- Р”Р»СЏ СѓРґР°Р»РµРЅРёСЏ РїСЂРѕС„РёР»СЏ РёСЃРїРѕР»СЊР·СѓРµС‚СЃСЏ inline-РєРЅРѕРїРєР°; СЂРµРґР°РєС‚РёСЂРѕРІР°РЅРёРµ РїРѕСЏРІРёС‚СЃСЏ РІ СЃР»РµРґСѓСЋС‰РёС… СЌС‚Р°РїР°С….
- РџР°СЂСЃРёРЅРі СЃРѕРѕР±С‰РµРЅРёР№ РЅР°СЃС‚СЂРѕРµРЅ РЅР° `HTML` (СЃРј. `ParseMode.HTML` РІ `bot/main.py`).

## Docker
1. Убедитесь, что Docker/Compose установлены.
2. В .env должен быть рабочий BOT_TOKEN (остальное можно оставить).
3. Запуск:
   `ash
   docker compose up --build -d
   `
4. Логи бота:
   `ash
   docker compose logs -f bot
   `

